<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tap & Play</title>
    <style>
        /* CSSリセット */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family:"UD デジタル 教科書体 N-R", "BIZ UDゴシック Regular", "Hiragino Kaku Gothic ProN", "ascii";
        }

        body {
            font-family: Arial, sans-serif;
            user-select: none;
            -webkit-touch-callout:none;
            -webkit-user-select:none;
            -moz-touch-callout:none;
            -moz-user-select:none;
        }

        main {
            padding: 0;
            height: calc(100vh);
        }

        .settings-item {
            display: flex;
            flex-direction: column;
        }

        .settings-item label {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .settings-item select,
        .settings-item input {
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .popup hr {
            margin-top: 20px;
            margin-bottom: 20px;
            border: 0;
            border-top: 1px solid #ccc;
        }

        .popup-content {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            width: 350px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            animation: fadeIn 0.3s;
        }

        .popup-content input[type="color"] {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .popup h3 {
            margin-top: 5px;
            font-size: 18px;
            color: #333;
        }

        .popup-buttons-bgcolor {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .popup-buttons-bgcolor button:hover {
            opacity: 0.8;
        }

        .popup-buttons-bgcolor button {
            padding-top: 5px;
            padding-bottom: 5px;
            width: 100%;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 15px;
            margin: auto;
        }

        .popup-buttons-icon {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .popup-buttons-icon button:hover {
            opacity: 0.8;
        }

        .popup-buttons-icon button {
            padding-top: 5px;
            padding-bottom: 5px;
            width: 100%;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 15px;
            margin: auto;
        }

        .popup-buttons-music {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .popup-buttons-music button:hover {
            opacity: 0.8;
        }

        .popup-buttons-music button {
            padding-top: 5px;
            padding-bottom: 5px;
            width: 100%;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 15px;
            margin: auto;
        }

        .btn-change {
            background-color: #4CAF50;
            color: white;
        }

        .btn-cancel {
            background-color: #2927a4;
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <main id="main-content">
        <div id="popup" class="popup">
            <div class="popup-content" style="margin-bottom: 5px;">
                <h2>管理者ページ</h2>
                <h3 style="margin-top: 20px;">アイコンの登録</h3>
                <div class="settings-item">
                    <label for="icon-name" style="margin-top: 10px;">Icon nameを入力してください:</label>
                    <input type="text" id="icon-value">
                    <label for="icon-description" style="margin-top: 10px;">説明を入力してください:</label>
                    <input type="text" id="icon-description">
                </div>
                <div style="margin-top: 15px; margin-bottom: 15px;">
                    <a href="../icon_registration_guide.md">新しくアイコンを登録する方法</a>
                </div>
                <div class="popup-buttons-icon">
                    <button class="btn-change">
                        <span class="material-icons">
                            add
                        </span>
                    </button>
                </div>
                <hr>
                <h3 style="margin-top: 20px;">アイコンの削除</h3>
                <div class="settings-item">
                    <label for="" style="margin-top: 10px;">削除するアイコンを選択</label>
                    <select id="icon-selector" style="margin-top: 10px;">
                        <!-- Icons are dynamically added here -->
                    </select>
                </div>
                <div class="popup-buttons-icon">
                    <button class="btn-cancel" id="delete-icon">
                        <span class="material-icons">
                            delete
                        </span>
                    </button>
                </div>
                <hr>
                <div>
                    <h3 style="margin-top: 20px;">Local Storageのデータを削除</h3>
                    <div class="settings-item" style="margin-top: 10px;"></div>
                        <label for="delete-checkbox" style="margin-top: 10px;">削除する場合はチェックしてください:</label>
                        <input type="checkbox" id="delete-checkbox">
                    </div>
                    <div class="popup-buttons-icon" style="margin-top: 20px;">
                        <button class="btn-cancel" id="clear-storage">
                            <span class="material-icons">
                                delete
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        // Load the icon list from local storage
        function loadIconList() {
            const iconList = localStorage.getItem('iconList');
            if (iconList) {
            const icons = JSON.parse(iconList);
            const iconSelector = document.getElementById('icon-selector');
            iconSelector.innerHTML = '';
            icons.forEach(icon => {
                const newOption = document.createElement('option');
                newOption.value = icon.value;
                newOption.textContent = icon.text;
                iconSelector.appendChild(newOption);
            });
            } else if (!iconList) {
                const defaultIcons = [
                { "value": "radio_button_unchecked", "text": "○"},
                { "value": "disabled_by_default", "text": "✕" },
                { "value": "light_mode", "text": "明るい" },
                { "value": "dark_mode", "text": "暗い" },
                { "value": "home", "text": "ホーム" },
                { "value": "search", "text": "検索" },
                { "value": "settings", "text": "設定" },
                { "value": "info", "text": "情報" },
                { "value": "Delete", "text": "削除" },
                { "value": "email", "text": "メール" },
                { "value": "phone", "text": "電話" },
                { "value": "favorite", "text": "お気に入り" },
                { "value": "help", "text": "ヘルプ" },
                { "value": "notifications", "text": "通知" },
                { "value": "music_note", "text": "音楽" },
                { "value": "volume_off", "text": "無音" }
            ];
            localStorage.setItem('iconList', JSON.stringify(defaultIcons));
            defaultIcons.forEach(icon => {
                const newOption = document.createElement('option');
                newOption.value = icon.value;
                newOption.textContent = icon.text;
                document.getElementById('icon-selector').appendChild(newOption);
            });
            }
        }
        // Add event listeners to save the icon list whenever it changes
        document.querySelector('.btn-change').addEventListener('click', function () {
            const iconValue = document.getElementById('icon-value').value;
            const iconDescription = document.getElementById('icon-description').value;

            if (iconValue && iconDescription) {
            const newOption = document.createElement('option');
            newOption.value = iconValue;
            newOption.textContent = iconDescription;
            document.getElementById('icon-selector').appendChild(newOption);
            alert(`アイコン "${iconDescription}" を追加しました。`);
            saveIconList();
            } else {
            alert('Icon nameと説明を入力してください。');
            }
        });
        function saveIconList() {
            const iconSelector = document.getElementById('icon-selector');
            const icons = [];
            for (let i = 0; i < iconSelector.options.length; i++) {
            icons.push({
                value: iconSelector.options[i].value,
                text: iconSelector.options[i].textContent
            });
            }
            localStorage.setItem('iconList', JSON.stringify(icons));
        }

        document.getElementById('delete-icon').addEventListener('click', function () {
            const selectedValue = document.getElementById('icon-selector').value;
            alert(`アイコン "${selectedValue}" を削除します。`);
            const iconSelector = document.getElementById('icon-selector');
            const selectedOption = iconSelector.options[iconSelector.selectedIndex];
            iconSelector.removeChild(selectedOption);
            saveIconList();
        });

        document.getElementById('clear-storage').addEventListener('click', function () {
            if (document.getElementById('delete-checkbox').checked) {
                localStorage.clear();
                alert('Local Storageのデータをすべて削除しました。');
                location.reload(); // Reload the page to reflect changes
            } else {
                alert('削除する場合はチェックしてください。');
            }
        });

        // Load the icon list when the page loads
        window.addEventListener('load', loadIconList);
    </script>
</body>
</html>
